% Use must pass options to xcolor like this (pure LaTeX)
%     \PassOptionsToPackage{natural,usenames,svgnames}{xcolor}
% or like this (org-mode export)
%     #+LATEX_CLASS_OPTIONS: [...,natural,usenames,svgnames]
\usepackage{listings}
\usepackage{xcolor}

%%
%% Yaml definition
%% (c) 2025 Michel Briand
%%
\lstdefinelanguage{Yaml}{
  morekeywords={True,False},
  sensitive=false,
  morecomment=[l]\#,
  morestring=[b]',
  morestring=[b]"
}

% style

\newcommand\YAMLcolonstyle{\color{red}\mdseries}
\newcommand\YAMLkeystyle{\color{black}\bfseries}
\newcommand\YAMLvaluestyle{\color{teal}\mdseries}

%%
%% Ansible definition
%% (c) 2025 Michel Briand
%%
\lstdefinelanguage{Ansible}{
  alsolanguage=Yaml,
  % backgroundcolor=\color{},
  commentstyle=\color{DarkGoldenrod},
  numberstyle=\tiny\color{teal},
  stringstyle=\color{orange},
  basicstyle=\ttfamily,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  keepspaces=true,
  numbers=left,
  numbersep=5pt,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2,
  % general
  morekeywords = {hosts,remote_user,tasks},
  keywordstyle=\color{magenta},
  % name
  morekeywords = [2]{name},
  keywordstyle = [2]\color{blue},
  % parameters
  morekeywords = [3]{state},
  keywordstyle = [3]\color{violet},
  % :
  moredelim=**[il][\YAMLcolonstyle{:}\YAMLvaluestyle]{:}
}
